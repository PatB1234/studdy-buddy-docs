<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Frontend - StuddyBuddy Docs</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">StuddyBuddy Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Pages</a>
                            </li>
                            <li class="nav-item">
                                <a href="../Backend/" class="nav-link">Backend</a>
                            </li>
                            <li class="nav-item">
                                <a href="../Core%20Functions/" class="nav-link">Core Functions</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Frontend</a>
                            </li>
                            <li class="nav-item">
                                <a href="../Improvements/" class="nav-link">Improvements</a>
                            </li>
                            <li class="nav-item">
                                <a href="../Learning/" class="nav-link">Learning</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../Core%20Functions/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Improvements/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="2"><a href="#router" class="nav-link">Router</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#interceptors" class="nav-link">Interceptors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#snackbars" class="nav-link">Snackbars</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#flashcards" class="nav-link">Flashcards</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#http-requests" class="nav-link">HTTP Requests</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#angular-material" class="nav-link">Angular Material</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#icons" class="nav-link">Icons</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>A well designed API needs a well-designed frontend to allow the user to use the API well. To do this, I had to utilise functions that had the user in mind. This included things such as Angular, Angular Material, and Google Icon Library.</p>
<h2 id="router">Router</h2>
<p>Firstly, we needed to allow users to navigate through the pages. This was done through the use of angular's routers. Angular is a component-based framework. This means that each page is its own component. To allow for navigation and appropriate displaying of the correct component, we have to code the correct paths in. This is done like so:</p>
<pre><code>export const routes: Routes = [
    {
        path: '',
        component: DashboardComponent  // DASHBOARD COMPONENT
    },
    {
        path: 'custom-prompt', 
        component: CustomPromptComponent
    },
    {
        path: 'flashcards',
        component: FlashcardsComponent
    },
    {
        path: 'question-answer',
        component: QuestionAnswerComponent
    }, 
    {
        path: 'summariser',
        component: SummariserComponent
    },
    {
        path: 'login',
        component: LoginComponent
    },
    {
        path: 'sign-up',
        component: SignUpComponent
    },
    {
        path: 'student-profile',
        component: ViewStudentProfileComponent
    },
    {
        path: 'add-section',
        component: AddSectionComponent
    }
];
</code></pre>
<p>Where each path is the URL path. So the <code>FlashcardComponent</code> could be found at the URL https://studdybuddy.app/flashcards</p>
<p>This also allows for navigation within the code. For example, if a user is not logged in, the code automatically navigates them to the login page with the code:
<code>this.router.navigate(['/login']);</code></p>
<h2 id="interceptors">Interceptors</h2>
<p>When something is not correct, for example if a user is not logged in or there is an error returned by the backend, the code has to intercept it to ensure that the frontend does not view these errors and allow them to correct the mistake without confusing them.</p>
<h3 id="cookie">Cookie</h3>
<p>Firstly, we have the cookie interceptor component. The code is:</p>
<pre><code>import { Injectable, inject } from '@angular/core';
import {
  HttpRequest,
  HttpHandler,
  HttpEvent,
  HttpInterceptor
} from '@angular/common/http';
import { Observable } from 'rxjs';
import { PLATFORM_ID } from '@angular/core';
import { isPlatformBrowser } from '@angular/common';

@Injectable()
export class CookieInterceptor implements HttpInterceptor {
  private platformId = inject(PLATFORM_ID);

  intercept(request: HttpRequest&lt;unknown&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;unknown&gt;&gt; {
    let token: string | undefined;

    if (isPlatformBrowser(this.platformId)) {
      token = document.cookie.split(&quot;; &quot;)
        .find((row) =&gt; row.startsWith(&quot;token=&quot;))
        ?.split(&quot;=&quot;)[1];
    }

    const modifiedRequest = request.clone({
      withCredentials: true,
      setHeaders: token ? { 'token': token } : {}
    });

    return next.handle(modifiedRequest);
  }
}
</code></pre>
<p>This code extracts a token from the user's browser storage and automatically adds it to every request that is sent. This ensure that the user is authenticated to prevent injection to the Gemini API.</p>
<h3 id="error">Error</h3>
<p>If the backend returns an error, particularly a 401 error indicating that a user is not logged in (from an invalid cookie), the frontend intercepts it to prevent the app stopping. The code is:</p>
<pre><code>import { Injectable } from '@angular/core';
import {
    HttpRequest,
    HttpHandler,
    HttpEvent,
    HttpInterceptor,
    HttpErrorResponse
} from '@angular/common/http';
import { Observable } from 'rxjs';
import { Router , ActivatedRoute, NavigationEnd} from '@angular/router';
import {tap, filter} from 'rxjs/operators';
@Injectable()
export class ErrorInterceptor implements HttpInterceptor {

    constructor(private router: Router, private route: ActivatedRoute) {}
    getChildRoute(route: ActivatedRoute): ActivatedRoute {
        while (route.firstChild) {
            route = route.firstChild;
        }
        return route;
        }
    intercept(request: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {

        const modifiedRequest = request.clone({
            headers: request.headers.set('X-Requested-With', 'XMLHttpRequest'),
            withCredentials: true
        });


        return next.handle(modifiedRequest).pipe( tap(() =&gt; {}, (err: any) =&gt; {

            if (err instanceof  HttpErrorResponse) {

                if (err.status != 401 ) {

                    return;
                }

                this.router.navigate(['/login']);
            }
        }));
    }
}
</code></pre>
<p>Here, the code intercepts all incoming requests. If the response has a code of 401, it automatically redirects to the login page and discards the contents of the request. This prevents an error from reaching the user and causing the app to halt.</p>
<h2 id="snackbars">Snackbars</h2>
<p>Some of these requests take time. To let the user know, I used angular-material's snackbars to prevent them from leaving the page prematurely due to a request taking time. For example, below is the snackbar that appears when a user requests to create flashcards.</p>
<p><img alt="Snackbar Flashcards" src="https://storage.googleapis.com/studdy-buddy-docs-image-hosting/snackbar-flashcard.png" /></p>
<p>This is the snackbar that appears when the user tries to create flashcards, ensuring that the user is not confused by wait times.</p>
<p>Additionally, the snackbar can also be used to display errors. For example, if the user does not have an existing account and tries to login, the app returns a separate snackbar, as shown below:
<img alt="Snackbar error" src="https://storage.googleapis.com/studdy-buddy-docs-image-hosting/login-snackbar.png" />
This indicates to the user that they need to sign in.</p>
<h2 id="flashcards">Flashcards</h2>
<p>When the flashcards are requested, we use a custom-built component that was taken from a StackBlitz repository. This can be seen below:
<img alt="Flaschards" src="https://storage.googleapis.com/studdy-buddy-docs-image-hosting/Flashcards.png" />
This creates a friendly environment for the user to interact with their flashcards. There is a display of the flashcard they are currently looking at and there is buttons to flip between the various flashcards. Additionally, the user can just click the flashcard to view its behind side.</p>
<h3 id="animations">Animations</h3>
<p>When flipping between the sides of the flashcards, there is an animations which can be seen below:
<img alt="Flashcard Animation" src="https://storage.googleapis.com/studdy-buddy-docs-image-hosting/Flashcard%20Animation.gif" />
<br/>
This brings a better user experience as it adds fluidity to the app. The code to do this is the following:</p>
<pre><code>  animations: [
        trigger('flipState', [ // Triggered when the user clicks the flashcards
          state('active', style({
            transform: 'rotateY(179deg)'
          })),
          state('inactive', style({
            transform: 'rotateY(0)'
          })),
          transition('active =&gt; inactive', animate('500ms ease-out')),
          transition('inactive =&gt; active', animate('500ms ease-in'))
        ])
      ]
</code></pre>
<h2 id="http-requests">HTTP Requests</h2>
<p>Every single component makes an HTTP request. We do this with the general format of the GET/POST Request as shown in the code:</p>
<pre><code>// For a POST Request
this.http.post(this.URL + &quot;API_REQUEST&quot;, DATA).subscribe((res: any) =&gt; {

})  

// For a GET Request
this.http.get(this.URL + &quot;/API_REQUEST&quot;).subscribe((res: any) =&gt; {

})
</code></pre>
<h2 id="angular-material">Angular Material</h2>
<p>I wanted the app to look good. To do this, I used premade components from a proprietary npm module called <a href="https://material.angular.dev/">Angular Material</a>. This is where I have taken various components such as: <br/></p>
<ul>
<li>The NavBar  <br/>
<img alt="NavBar" src="https://storage.googleapis.com/studdy-buddy-docs-image-hosting/Navbar.png" /> <br/></li>
<li>The Side Tree <br/>
<img alt="Side Tree" src="https://storage.googleapis.com/studdy-buddy-docs-image-hosting/Sidebar.png" /> <br/></li>
<li>The aforementioned snack bar <br/>
And many more</li>
</ul>
<p>This creates fluidity and cleanliness in the app and also adds a dynamic layer as these components are scaleable to the size of their display, creating a better user experience</p>
<h2 id="icons">Icons</h2>
<p>I used the google Icon library to simplify the purpose of some buttons into images rather than words to reduce the page's clutter. They have been used in various places such as:
- The menu Row <br/>
<img alt="Menu Row" src="https://storage.googleapis.com/studdy-buddy-docs-image-hosting/Menu.png" /> <br/>
- Each node on the side bar <br/>
<img alt="Side Bar" src="https://storage.googleapis.com/studdy-buddy-docs-image-hosting/Sidebar.png" /></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
